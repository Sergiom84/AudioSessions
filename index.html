<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Sessions Archive - Private Zone Available</title>
    <meta name="description" content="Interactive audio sessions archive featuring House, Techno, Progressive and Remember">
    <link rel="stylesheet" href="style.css">
    <script src="global-player.js"></script>
</head>
<body>
    <!-- Scroll Progress Indicator -->
    <div class="scroll-progress"></div>
    <!-- Updated: Private Zone Added -->
    
    <!-- Parallax Background Elements -->
    <div class="bg-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <div class="viewport">
        <main class="container">
            <!-- House Section -->
            <section class="genre-section" data-genre="house">
                <div class="genre-header">
                    <h1 class="genre-title">HOUSE</h1>
                    <div class="genre-indicator"></div>
                </div>
                <div class="genre-preview">
                    <a href="house.html" class="genre-link">
                        <div class="genre-image-container">
                            <svg class="genre-image" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                                <defs>
                                    <linearGradient id="houseGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#00ff88;stop-opacity:0.8" />
                                        <stop offset="100%" style="stop-color:#00cc66;stop-opacity:0.9" />
                                    </linearGradient>
                                </defs>
                                <rect width="400" height="300" fill="url(#houseGradient)"/>
                                <circle cx="200" cy="150" r="60" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                                <circle cx="200" cy="150" r="40" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                                <circle cx="200" cy="150" r="8" fill="rgba(255,255,255,0.8)"/>
                                <text x="200" y="220" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="18" font-weight="bold">HOUSE SESSIONS</text>
                            </svg>
                            <div class="genre-overlay">
                                <span class="genre-cta">Explorar →</span>
                            </div>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Techno Section -->
            <section class="genre-section" data-genre="techno">
                <div class="genre-header">
                    <h1 class="genre-title">TECHNO</h1>
                    <div class="genre-indicator"></div>
                </div>
                <div class="genre-preview">
                    <a href="techno.html" class="genre-link">
                        <div class="genre-image-container">
                            <svg class="genre-image" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                                <defs>
                                    <linearGradient id="technoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#ff0055;stop-opacity:0.8" />
                                        <stop offset="100%" style="stop-color:#cc0044;stop-opacity:0.9" />
                                    </linearGradient>
                                </defs>
                                <rect width="400" height="300" fill="url(#technoGradient)"/>
                                <polygon points="150,100 250,100 300,150 250,200 150,200 100,150" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                                <polygon points="170,120 230,120 260,150 230,180 170,180 140,150" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                                <rect x="190" y="140" width="20" height="20" fill="rgba(255,255,255,0.8)"/>
                                <text x="200" y="220" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="18" font-weight="bold">TECHNO SESSIONS</text>
                            </svg>
                            <div class="genre-overlay">
                                <span class="genre-cta">Explorar →</span>
                            </div>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Progressive Section -->
            <section class="genre-section" data-genre="progressive">
                <div class="genre-header">
                    <h1 class="genre-title">PROGRESSIVE</h1>
                    <div class="genre-indicator"></div>
                </div>
                <div class="genre-preview">
                    <a href="progressive.html" class="genre-link">
                        <div class="genre-image-container">
                            <svg class="genre-image" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                                <defs>
                                    <linearGradient id="progressiveGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#0099ff;stop-opacity:0.8" />
                                        <stop offset="100%" style="stop-color:#0077cc;stop-opacity:0.9" />
                                    </linearGradient>
                                </defs>
                                <rect width="400" height="300" fill="url(#progressiveGradient)"/>
                                <path d="M100,200 Q200,100 300,200" stroke="rgba(255,255,255,0.3)" stroke-width="3" fill="none"/>
                                <path d="M120,180 Q200,120 280,180" stroke="rgba(255,255,255,0.2)" stroke-width="2" fill="none"/>
                                <path d="M140,160 Q200,140 260,160" stroke="rgba(255,255,255,0.1)" stroke-width="1" fill="none"/>
                                <circle cx="200" cy="150" r="6" fill="rgba(255,255,255,0.8)"/>
                                <text x="200" y="240" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="18" font-weight="bold">PROGRESSIVE SESSIONS</text>
                            </svg>
                            <div class="genre-overlay">
                                <span class="genre-cta">Explorar →</span>
                            </div>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Remember Section -->
            <section class="genre-section" data-genre="remember">
                <div class="genre-header">
                    <h1 class="genre-title">REMEMBER</h1>
                    <div class="genre-indicator"></div>
                </div>
                <div class="genre-preview">
                    <a href="remember.html" class="genre-link">
                        <div class="genre-image-container">
                            <svg class="genre-image" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                                <defs>
                                    <linearGradient id="rememberGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#ffaa00;stop-opacity:0.8" />
                                        <stop offset="100%" style="stop-color:#cc8800;stop-opacity:0.9" />
                                    </linearGradient>
                                </defs>
                                <rect width="400" height="300" fill="url(#rememberGradient)"/>
                                <polygon points="200,80 220,120 260,120 230,150 240,190 200,170 160,190 170,150 140,120 180,120" fill="rgba(255,255,255,0.2)" stroke="rgba(255,255,255,0.4)" stroke-width="2"/>
                                <circle cx="200" cy="150" r="15" fill="rgba(255,255,255,0.8)"/>
                                <text x="200" y="240" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="18" font-weight="bold">REMEMBER SESSIONS</text>
                            </svg>
                            <div class="genre-overlay">
                                <span class="genre-cta">Explorar →</span>
                            </div>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Private Zone Section -->
            <section class="genre-section" data-genre="private">
                <div class="genre-header">
                    <h1 class="genre-title">PRIVATE ZONE</h1>
                    <div class="genre-indicator"></div>
                </div>
                <div class="genre-preview">
                    <div class="genre-link private-access" id="privateAccess">
                        <div class="genre-image-container">
                            <svg class="genre-image" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                                <defs>
                                    <linearGradient id="privateGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#8b00ff;stop-opacity:0.8" />
                                        <stop offset="50%" style="stop-color:#4a00aa;stop-opacity:0.9" />
                                        <stop offset="100%" style="stop-color:#220055;stop-opacity:1" />
                                    </linearGradient>
                                    <filter id="glow">
                                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                        <feMerge> 
                                            <feMergeNode in="coloredBlur"/>
                                            <feMergeNode in="SourceGraphic"/>
                                        </feMerge>
                                    </filter>
                                </defs>
                                <rect width="400" height="300" fill="url(#privateGradient)"/>
                                <!-- Lock Icon -->
                                <g transform="translate(170, 100)">
                                    <rect x="10" y="30" width="40" height="30" rx="3" fill="rgba(255,255,255,0.8)" stroke="rgba(139,0,255,0.6)" stroke-width="2"/>
                                    <path d="M20,30 V20 Q20,10 30,10 Q40,10 40,20 V30" stroke="rgba(255,255,255,0.8)" stroke-width="3" fill="none"/>
                                    <circle cx="30" cy="45" r="3" fill="rgba(139,0,255,0.8)"/>
                                    <rect x="29" y="48" width="2" height="8" fill="rgba(139,0,255,0.8)"/>
                                </g>
                                <!-- Sparkles -->
                                <circle cx="120" cy="80" r="2" fill="rgba(255,255,255,0.6)" filter="url(#glow)"/>
                                <circle cx="280" cy="90" r="1.5" fill="rgba(255,255,255,0.7)" filter="url(#glow)"/>
                                <circle cx="150" cy="200" r="1" fill="rgba(255,255,255,0.5)" filter="url(#glow)"/>
                                <circle cx="320" cy="180" r="2.5" fill="rgba(255,255,255,0.8)" filter="url(#glow)"/>
                                <text x="200" y="240" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="16" font-weight="bold">VIP ACCESS REQUIRED</text>
                            </svg>
                            <div class="genre-overlay">
                                <span class="genre-cta">Acceso privado →</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Password Modal -->
    <div id="passwordModal" class="password-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Acceso Privado</h2>
                <span class="close" id="closeModal">&times;</span>
            </div>
            <div class="modal-body">
                <p>Introduce la contraseña para acceder a la zona VIP:</p>
                <input type="password" id="passwordInput" placeholder="Contraseña" maxlength="20">
                <div class="modal-buttons">
                    <button id="submitPassword" class="submit-btn">Acceder</button>
                    <button id="cancelAccess" class="cancel-btn">Cancelar</button>
                </div>
                <div id="errorMessage" class="error-message"></div>
            </div>
        </div>
    </div>
    
    <script>
        // Scroll Progress Indicator
        window.addEventListener('scroll', () => {
            const scrolled = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
            document.querySelector('.scroll-progress').style.width = scrolled + '%';
        });

        // Parallax Effect for Background Particles
        window.addEventListener('scroll', () => {
            const scrolled = window.scrollY;
            const particles = document.querySelectorAll('.particle');
            
            particles.forEach((particle, index) => {
                const speed = (index + 1) * 0.2;
                particle.style.transform = `translateY(${scrolled * speed}px) rotate(${scrolled * 0.1}deg)`;
            });
        });

        // Scroll-triggered animations for genre sections
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('in-view');
                } else {
                    entry.target.classList.remove('in-view');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.genre-section').forEach(section => {
            observer.observe(section);
        });

        // Dynamic color shifts based on scroll position
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('.genre-section');
            const scrollPos = window.scrollY + window.innerHeight / 2;
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                
                if (scrollPos >= sectionTop && scrollPos <= sectionTop + sectionHeight) {
                    const genre = section.dataset.genre;
                    document.body.setAttribute('data-active-genre', genre);
                }
            });
        });

        // Private Zone Access
        document.getElementById('privateAccess').addEventListener('click', () => {
            document.getElementById('passwordModal').style.display = 'flex';
            document.getElementById('passwordInput').focus();
        });

        document.getElementById('closeModal').addEventListener('click', () => {
            document.getElementById('passwordModal').style.display = 'none';
            document.getElementById('passwordInput').value = '';
            document.getElementById('errorMessage').textContent = '';
        });

        document.getElementById('cancelAccess').addEventListener('click', () => {
            document.getElementById('passwordModal').style.display = 'none';
            document.getElementById('passwordInput').value = '';
            document.getElementById('errorMessage').textContent = '';
        });

        document.getElementById('submitPassword').addEventListener('click', async () => {
            const password = document.getElementById('passwordInput').value;
            const errorMsg = document.getElementById('errorMessage');
            
            if (!password.trim()) {
                errorMsg.textContent = 'Por favor, introduce una contraseña.';
                return;
            }
            
            try {
                const response = await fetch('/api/auth', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ password: password })
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    // Store access in session (persiste durante la sesión del navegador)
                    sessionStorage.setItem('privateAccess', 'true');
                    window.location.href = 'private.html';
                } else {
                    errorMsg.textContent = data.error || 'Contraseña incorrecta. Inténtalo de nuevo.';
                    document.getElementById('passwordInput').value = '';
                    document.getElementById('passwordInput').focus();
                }
            } catch (error) {
                console.error('Authentication error:', error);
                errorMsg.textContent = 'Error de conexión. Inténtalo de nuevo.';
            }
        });

        // Enter key support
        document.getElementById('passwordInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('submitPassword').click();
            }
        });

        // Close modal when clicking outside
        document.getElementById('passwordModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('passwordModal')) {
                document.getElementById('passwordModal').style.display = 'none';
                document.getElementById('passwordInput').value = '';
                document.getElementById('errorMessage').textContent = '';
            }
        });
    </script>

    <!-- Newsletter Section -->
    <footer class="newsletter-footer">
        <div class="newsletter-container">
            <h3>🔔 Recibe nuevas sesiones en tu email</h3>
            <p>Te avisamos cuando subamos nuevas sesiones (sin spam, solo música)</p>
            <form id="newsletterForm" class="newsletter-form">
                <input
                    type="email"
                    id="emailInput"
                    placeholder="tu@email.com"
                    required
                    pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                />
                <button type="submit">Suscribirme</button>
            </form>
            <p id="newsletterStatus" class="newsletter-status"></p>
        </div>
    </footer>

    <style>
    .newsletter-footer {
        background: linear-gradient(135deg, rgba(0,255,136,0.1), rgba(0,204,102,0.1));
        border-top: 1px solid var(--border-color);
        padding: 48px 24px;
        margin-top: 80px;
    }

    .newsletter-container {
        max-width: 600px;
        margin: 0 auto;
        text-align: center;
    }

    .newsletter-container h3 {
        font-size: 1.5rem;
        margin-bottom: 8px;
        color: var(--text-primary);
    }

    .newsletter-container p {
        color: var(--text-secondary);
        margin-bottom: 24px;
    }

    .newsletter-form {
        display: flex;
        gap: 12px;
        max-width: 480px;
        margin: 0 auto;
    }

    .newsletter-form input {
        flex: 1;
        padding: 12px 16px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        font-size: 1rem;
        background: var(--card-bg);
        color: var(--text-primary);
    }

    .newsletter-form button {
        padding: 12px 24px;
        background: #00ff88;
        color: #000;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s;
    }

    .newsletter-form button:hover {
        transform: scale(1.05);
    }

    .newsletter-status {
        margin-top: 12px;
        font-size: 0.9rem;
        min-height: 20px;
    }

    @media (max-width: 600px) {
        .newsletter-form {
            flex-direction: column;
        }
    }
    </style>

    <script>
    // Google Apps Script Web App URL
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzOXCS0eykfHiTq4wRhjHrXHKNCc3Q2n82fDjqGRVV33wkEbHngov9SJWuAgnZuRbNXDA/exec';

    document.getElementById('newsletterForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const email = document.getElementById('emailInput').value;
        const status = document.getElementById('newsletterStatus');
        const button = e.target.querySelector('button');

        // Validar que tengas la URL configurada
        if (GOOGLE_SCRIPT_URL === 'TU_URL_AQUI') {
            status.style.color = '#ff0055';
            status.textContent = '⚠️ Newsletter no configurado aún. Contacta al administrador.';
            return;
        }

        // Deshabilitar botón
        button.disabled = true;
        button.textContent = 'Enviando...';
        status.textContent = '';

        try {
            const response = await fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    email: email,
                    action: 'subscribe'
                })
            });

            // Con no-cors no podemos leer la respuesta, así que asumimos éxito
            status.style.color = '#00ff88';
            status.textContent = '✅ ¡Suscrito! Revisa tu email (también spam).';
            document.getElementById('emailInput').value = '';

        } catch (error) {
            status.style.color = '#ff0055';
            status.textContent = '❌ Error. Intenta de nuevo o contacta al admin.';
            console.error('Error:', error);
        } finally {
            button.disabled = false;
            button.textContent = 'Suscribirme';
        }
    });
    </script>
</body>
</html>

