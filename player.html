<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Player - Sessions Archive</title>
    <meta name="description" content="Audio player with tracklist and download">
    <link rel="stylesheet" href="style.css">
    <script src="global-player.js"></script>
</head>
<body data-page="player">
    <!-- Scroll Progress Indicator -->
    <div class="scroll-progress"></div>
    
    <!-- Navigation -->
    <nav class="player-nav">
        <a href="javascript:history.back()" class="nav-back">← Volver</a>
    </nav>
    
    <!-- Parallax Background Elements -->
    <div class="bg-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <div class="viewport">
        <main class="container player-container">
            <!-- Session Cover & Player -->
            <div class="player-section">
                <div class="session-cover" id="sessionCover">
                    <!-- SVG will be dynamically inserted here -->
                </div>
                
                <div class="player-controls">
                    <h1 class="session-title" id="mainSessionTitle">Progressive House</h1>
                    <p class="session-subtitle" id="sessionSubtitle">First Date Vol. II</p>
                    
                    <div class="audio-player-container">
                        <!-- Hidden audio element -->
                        <audio preload="none" id="mainAudioPlayer" aria-label="Reproductor principal de audio" crossorigin="anonymous">
                            <source id="audioSource" src="https://archive.org/download/first-date-vol.-ii/First%20Date%20Vol.II.mp3" type="audio/mpeg">
                            Tu navegador no soporta el elemento de audio.
                        </audio>
                        
                        <!-- Custom Player Controls -->
                        <div class="custom-player">
                            <div class="player-controls-row">
                                <button class="control-btn" id="rewindBtn" title="Rebobinar 10s">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,5V1L7,6L12,11V7A6,6 0 0,1 18,13A6,6 0 0,1 12,19A6,6 0 0,1 6,13H4A8,8 0 0,0 12,21A8,8 0 0,0 20,13A8,8 0 0,0 12,5Z"/>
                                        <text x="12" y="15" text-anchor="middle" font-size="8" fill="currentColor">10</text>
                                    </svg>
                                </button>
                                
                                <button class="control-btn" id="stopBtn" title="Parar">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <rect x="6" y="6" width="12" height="12"/>
                                    </svg>
                                </button>
                                
                                <button class="control-btn play-pause-btn" id="playPauseBtn" title="Reproducir/Pausar">
                                    <svg class="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M8,5.14V19.14L19,12.14L8,5.14Z"/>
                                    </svg>
                                    <svg class="pause-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                                        <path d="M14,19H18V5H14M6,19H10V5H6V19Z"/>
                                    </svg>
                                </button>
                                
                                <button class="control-btn" id="forwardBtn" title="Adelantar 10s">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,5V1L17,6L12,11V7A6,6 0 0,0 6,13A6,6 0 0,0 12,19A6,6 0 0,0 18,13H20A8,8 0 0,1 12,21A8,8 0 0,1 4,13A8,8 0 0,1 12,5Z"/>
                                        <text x="12" y="15" text-anchor="middle" font-size="8" fill="currentColor">10</text>
                                    </svg>
                                </button>
                                
                                <button class="control-btn" id="volumeBtn" title="Volumen">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.85 14,18.71V20.77C18.01,19.86 21,16.28 21,12C21,7.72 18.01,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"/>
                                    </svg>
                                </button>
                                
                                <div class="time-display">
                                    <span id="currentTime">00:00</span> / <span id="totalTime">00:00</span>
                                </div>
                            </div>
                            
                            <div class="progress-container">
                                <div class="progress-bar" id="progressBar">
                                    <div class="progress-fill" id="progressFill"></div>
                                    <div class="progress-handle" id="progressHandle"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="player-actions">
                        <button class="download-btn" id="downloadBtn">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                            </svg>
                            Descargar
                        </button>
                        <div class="session-stats">
                            <span class="stat">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                </svg>
                                <span id="duration">--:--</span>
                            </span>
                            <span class="stat">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                                <span id="quality">320kbps</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tracklist Section -->
            <div class="tracklist-section">
                <h2 class="tracklist-title">Tracklist</h2>
                <div class="tracklist" id="tracklist">
                    <!-- Tracks will be dynamically inserted here -->
                </div>
            </div>
        </main>
    </div>
    
    <script>
        // Session data structure
        const sessionData = {
            'nature-tech-house': {
                title: 'Nature',
                subtitle: 'Una selección potente de Tech House con beats profundos y grooves hipnóticos',
                audioUrl: 'https://archive.org/download/nature-club/Nature%20Club.mp3',
                downloadUrl: 'https://archive.org/details/nature-club',
                duration: '01:15:32',
                cover: `
                    <svg class="session-cover-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="natureGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#1a1a1a;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#2d2d2d;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#0d0d0d;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="natureTextGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#9ed82c;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#7bc142;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#6ba83a;stop-opacity:1" />
                            </linearGradient>
                            <filter id="glow-green">
                                <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Background -->
                        <rect width="400" height="400" fill="url(#natureGradient)"/>
                        
                        <!-- Oval border like in the original -->
                        <ellipse cx="200" cy="200" rx="180" ry="120" fill="none" stroke="rgba(255, 255, 255, 0.8)" stroke-width="3" stroke-dasharray="8,4"/>
                        
                        <!-- Nature text in the center with green gradient -->
                        <text x="200" y="190" text-anchor="middle" fill="url(#natureTextGradient)" font-size="48" font-weight="bold" font-family="Arial, sans-serif" filter="url(#glow-green)">NATURE</text>
                        <text x="200" y="220" text-anchor="middle" fill="url(#natureTextGradient)" font-size="12" font-weight="bold" font-family="Arial, sans-serif">®</text>
                        
                        <!-- Tech elements -->
                        <circle cx="80" cy="100" r="2" fill="rgba(158, 216, 44, 0.6)" opacity="0.8"/>
                        <circle cx="320" cy="120" r="1.5" fill="rgba(158, 216, 44, 0.7)" opacity="0.9"/>
                        <circle cx="60" cy="300" r="1" fill="rgba(158, 216, 44, 0.5)" opacity="0.6"/>
                        <circle cx="340" cy="280" r="2.5" fill="rgba(158, 216, 44, 0.8)" opacity="1"/>
                        
                        <!-- Tech House label -->
                        <text x="200" y="350" text-anchor="middle" fill="rgba(255, 255, 255, 0.8)" font-size="14" font-weight="bold" font-family="Arial, sans-serif">TECH HOUSE</text>
                    </svg>
                `,
                tracklist: [
                    { time: '00:00', artist: 'Desert Lettin', title: 'Ya Mind Go Bottomless', label: 'Tech House' },
                    { time: '03:12', artist: 'Tdr', title: 'Squelch', label: 'Tech House' },
                    { time: '06:45', artist: 'Darren Kay', title: 'Splintered', label: 'Ben Sims Remix' },
                    { time: '09:30', artist: 'Andrew Mclauchlan', title: 'Love Story', label: 'Tech House' },
                    { time: '12:15', artist: 'Milo', title: 'Jungle Of Mirror', label: 'Tech House' },
                    { time: '15:20', artist: 'Ben Sims', title: 'Manipulated', label: 'Adam Beyer Remix' },
                    { time: '18:45', artist: 'Christian Smith', title: 'Silver Streak', label: 'Tech House' },
                    { time: '21:30', artist: 'DIGITAL EXPRESS', title: 'The Club', label: 'Tech House' },
                    { time: '24:10', artist: 'Deetron', title: 'Emphasis', label: 'Tech House' },
                    { time: '27:25', artist: 'Stephane Malca feat. Kenny', title: 'Revolution', label: 'Mike Monday Badman Remix' },
                    { time: '30:40', artist: 'Monolink', title: 'Deluxe TGX', label: 'Tech House' },
                    { time: '33:55', artist: 'Native', title: 'Feel the Drums', label: 'Tech House' },
                    { time: '36:20', artist: 'Renato Cohen', title: 'Pontapé', label: 'Tech House' },
                    { time: '39:10', artist: 'Tekken', title: 'Tribal Pursuit', label: 'Tech House' },
                    { time: '42:35', artist: 'D-Factor', title: 'Barana', label: 'Tech House' },
                    { time: '45:20', artist: 'Dj Luccio Feat Sandy Wilhelm', title: 'Paradise', label: 'Tech House' },
                    { time: '48:15', artist: 'Oxia', title: 'Inspiration', label: 'Tech House' },
                    { time: '51:40', artist: 'Solid Session', title: 'Format 1', label: 'Dj Misjah Xxl Mix' },
                    { time: '54:25', artist: 'Surgeon', title: 'La Real', label: 'Tech House' },
                    { time: '57:50', artist: 'Gaetek', title: 'Ghana b2', label: 'Tech House' },
                    { time: '60:10', artist: 'Olav Basoski pres. The Zarrow Bros', title: 'Revelation 3', label: 'Tech House' },
                    { time: '63:25', artist: 'Jel Ford', title: 'Flaunt the Law', label: 'Tech House' },
                    { time: '66:40', artist: 'Defaced', title: 'Out Run', label: 'Tech House' },
                    { time: '69:15', artist: 'Len Faki', title: 'Figure 13', label: 'Schranz' },
                    { time: '72:30', artist: 'Jeff Mills', title: 'The Bells', label: 'Lewis Lastella Remix' }
                ]
            },
            'first-date-vol-ii': {
                title: 'First Date Vol. II',
                subtitle: 'Una selección progresiva house que combina melodías envolventes con ritmos hipnóticos',
                audioUrl: 'https://archive.org/download/first-date-vol.-ii/First%20Date%20Vol.II.mp3',
                downloadUrl: 'https://archive.org/details/first-date-vol.-ii',
                duration: '01:04:59',
                cover: `
                    <svg class="session-cover-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="realSunsetLargeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#FFD700;stop-opacity:0.9" />
                                <stop offset="20%" style="stop-color:#FFA500;stop-opacity:0.9" />
                                <stop offset="40%" style="stop-color:#FF8C00;stop-opacity:0.8" />
                                <stop offset="60%" style="stop-color:#FF7F50;stop-opacity:0.8" />
                                <stop offset="80%" style="stop-color:#CD853F;stop-opacity:0.7" />
                                <stop offset="100%" style="stop-color:#8B4513;stop-opacity:0.9" />
                            </linearGradient>
                            <linearGradient id="desertLargeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#DEB887;stop-opacity:0.8" />
                                <stop offset="50%" style="stop-color:#CD853F;stop-opacity:0.7" />
                                <stop offset="100%" style="stop-color:#8B4513;stop-opacity:0.6" />
                            </linearGradient>
                            <radialGradient id="sunRadialLarge" cx="70%" cy="25%" r="50%">
                                <stop offset="0%" style="stop-color:#FFFACD;stop-opacity:0.9" />
                                <stop offset="30%" style="stop-color:#FFE4B5;stop-opacity:0.6" />
                                <stop offset="70%" style="stop-color:#FFA500;stop-opacity:0.3" />
                                <stop offset="100%" style="stop-color:#FF8C00;stop-opacity:0.1" />
                            </radialGradient>
                            <filter id="desert-glow-large">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Sky background with real sunset colors -->
                        <rect width="400" height="400" fill="url(#realSunsetLargeGradient)"/>
                        
                        <!-- Sun glow -->
                        <ellipse cx="280" cy="100" rx="120" ry="50" fill="url(#sunRadialLarge)" filter="url(#desert-glow-large)"/>
                        
                        <!-- Layered mountains like in the original -->
                        <path d="M0,160 Q50,140 100,150 T200,145 T300,150 T400,160 L400,400 L0,400 Z" fill="rgba(139, 69, 19, 0.6)"/>
                        <path d="M0,180 Q80,160 150,170 T250,165 T350,170 T400,180 L400,400 L0,400 Z" fill="rgba(160, 82, 45, 0.5)"/>
                        <path d="M0,200 Q100,180 180,190 T280,185 T400,200 L400,400 L0,400 Z" fill="rgba(205, 133, 63, 0.4)"/>
                        
                        <!-- Desert floor more realistic -->
                        <rect x="0" y="250" width="400" height="150" fill="url(#desertLargeGradient)"/>
                        
                        <!-- Van positioned like in original (left side) -->
                        <g transform="translate(60, 260) scale(1.2)">
                            <!-- Van body - more realistic proportions -->
                            <rect x="0" y="15" width="70" height="30" rx="4" fill="rgba(245, 245, 220, 0.9)" stroke="rgba(139, 69, 19, 0.8)" stroke-width="1"/>
                            <!-- Van front -->
                            <rect x="70" y="10" width="30" height="35" rx="3" fill="rgba(245, 245, 220, 0.9)" stroke="rgba(139, 69, 19, 0.8)" stroke-width="1"/>
                            <!-- Windows with realistic tint -->
                            <rect x="75" y="13" width="20" height="10" rx="1" fill="rgba(70, 130, 180, 0.6)"/>
                            <rect x="5" y="18" width="10" height="8" rx="1" fill="rgba(70, 130, 180, 0.6)"/>
                            <rect x="20" y="18" width="10" height="8" rx="1" fill="rgba(70, 130, 180, 0.6)"/>
                            <rect x="35" y="18" width="10" height="8" rx="1" fill="rgba(70, 130, 180, 0.6)"/>
                            <rect x="50" y="18" width="10" height="8" rx="1" fill="rgba(70, 130, 180, 0.6)"/>
                            <!-- Wheels -->
                            <circle cx="20" cy="50" r="8" fill="rgba(64, 64, 64, 0.9)"/>
                            <circle cx="80" cy="50" r="8" fill="rgba(64, 64, 64, 0.9)"/>
                            <!-- Dust trail more prominent -->
                            <ellipse cx="-15" cy="55" rx="25" ry="5" fill="rgba(222, 184, 135, 0.5)" opacity="0.8"/>
                            <ellipse cx="-35" cy="57" rx="30" ry="3" fill="rgba(222, 184, 135, 0.4)" opacity="0.6"/>
                            <ellipse cx="-55" cy="58" rx="35" ry="2" fill="rgba(222, 184, 135, 0.3)" opacity="0.4"/>
                        </g>
                        
                        <!-- Enhanced atmospheric dust particles -->
                        <circle cx="150" cy="180" r="1.5" fill="rgba(255, 255, 255, 0.4)" opacity="0.7"/>
                        <circle cx="250" cy="160" r="2" fill="rgba(255, 255, 255, 0.5)" opacity="0.8"/>
                        <circle cx="320" cy="170" r="1.5" fill="rgba(255, 255, 255, 0.4)" opacity="0.6"/>
                        <circle cx="180" cy="190" r="1" fill="rgba(255, 255, 255, 0.3)" opacity="0.5"/>
                        <circle cx="280" cy="175" r="1.2" fill="rgba(255, 255, 255, 0.4)" opacity="0.6"/>
                    </svg>
                `,
                tracklist: [
                    { time: '00:00', artist: 'A.M.R', title: 'Sailor\'s Cry', label: '' },
                    { time: '04:30', artist: 'A.M.R & Brandon Mignacca', title: 'Fell Out Of Love', label: '' },
                    { time: '08:45', artist: 'Howling', title: '\'Bind', label: '' },
                    { time: '12:20', artist: 'ARTBAT', title: 'Closer Feat. WhoMadeWho', label: '' },
                    { time: '16:40', artist: '&ME', title: 'The Rapture Pt.II (Coco Vocal Edit)', label: '' },
                    { time: '20:15', artist: 'Nicolas Duvoisin', title: 'Blue Turtle', label: '' },
                    { time: '24:30', artist: 'Niconé & Aracil', title: 'Love Is A Colour ft. Allen Hulsey', label: '' },
                    { time: '28:50', artist: 'Cioz', title: 'Cosmic Noise', label: 'Stil vor Talent' },
                    { time: '32:10', artist: 'Chelsea Wolfe', title: 'The Warden', label: '' },
                    { time: '35:45', artist: 'Julian Wassermann', title: 'Sol', label: '' },
                    { time: '39:20', artist: 'Various', title: 'There Is Still Pain Left (Laolu Remix)', label: '' },
                    { time: '42:55', artist: 'Bruno Zarra', title: 'Voyage', label: '' },
                    { time: '46:30', artist: 'DJ Rolando', title: 'Jaguar (Golan Zocher & Kai Vice Remix)', label: '' },
                    { time: '50:05', artist: 'Droog', title: 'Lucent', label: '' },
                    { time: '53:40', artist: 'Mat Zo', title: 'Petrushka', label: '' },
                    { time: '57:15', artist: 'Emanuel Top', title: 'Turkish Bazar', label: '' },
                    { time: '60:50', artist: 'CHUS & CEBALLOS + RICHIE SANTANA', title: 'LOW FREQUENCY', label: '' },
                    { time: '64:25', artist: 'Dj Chus', title: 'Afrika', label: '' },
                    { time: '68:00', artist: 'HÆLOS', title: 'End of World Party (Sascha Funke)', label: '' },
                    { time: '71:35', artist: 'UNKLE', title: 'Let\'s All Pray For This World', label: '' }
                ]
            },
            'deep-house-01': {
                title: 'Deep House Journey',
                subtitle: 'Una sesión profunda y melódica que explora los sonidos del deep house contemporáneo',
                audioUrl: 'https://archive.org/download/deep-house-session/deep-house-session.mp3',
                downloadUrl: 'https://archive.org/download/deep-house-session/deep-house-session.mp3',
                duration: '01:23:45',
                cover: `
                    <svg class="session-cover-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="deepHouseLargeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00ff88;stop-opacity:0.9" />
                                <stop offset="50%" style="stop-color:#00cc66;stop-opacity:0.8" />
                                <stop offset="100%" style="stop-color:#009944;stop-opacity:0.9" />
                            </linearGradient>
                            <filter id="glowLarge">
                                <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        <rect width="400" height="400" fill="url(#deepHouseLargeGradient)"/>
                        <circle cx="200" cy="200" r="120" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="3"/>
                        <circle cx="200" cy="200" r="90" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                        <circle cx="200" cy="200" r="60" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
                        <circle cx="200" cy="200" r="12" fill="rgba(255,255,255,0.8)" filter="url(#glowLarge)"/>
                    </svg>
                `,
                tracklist: [
                    { time: '00:00', artist: 'Lane 8', title: 'Run', label: 'This Never Happened' },
                    { time: '06:42', artist: 'Ben Böhmer', title: 'Beyond Beliefs', label: 'Anjunadeep' },
                    { time: '12:15', artist: 'Yotto', title: 'The One You Left Behind', label: 'Odd One Out' },
                    { time: '18:30', artist: 'Marsh', title: 'Lailonie', label: 'Anjunadeep' },
                    { time: '24:45', artist: 'Spencer Brown', title: 'Windows 95 on Acid', label: 'Anjunabeats' },
                    { time: '31:12', artist: 'Tinlicker', title: 'Need You', label: 'Anjunadeep' },
                    { time: '37:28', artist: 'Nora En Pure', title: 'Come With Me', label: 'Enormous Tunes' },
                    { time: '43:55', artist: 'Joris Voorn', title: 'Ryo', label: 'Spectrum' },
                    { time: '50:20', artist: 'Dusky', title: 'Ingrid Is A Hybrid', label: '17 Steps' },
                    { time: '56:40', artist: 'Sebastien Leger', title: 'Hypnotized', label: 'Systematic' },
                    { time: '62:15', artist: 'Camelphat', title: 'Hypercolour', label: 'Hypercolour' },
                    { time: '68:30', artist: 'Kidnap', title: 'Moments', label: 'Anjunadeep' },
                    { time: '74:45', artist: 'Solomun', title: 'Friends', label: 'Diynamic' },
                    { time: '80:12', artist: 'Tale Of Us', title: 'Monument', label: 'Afterlife' }
                ]
            },
            'tech-house-01': {
                title: 'Tech House Vibes',
                subtitle: 'Ritmos techno fusionados con groove house para la pista de baile',
                audioUrl: 'https://archive.org/download/tech-house-vibes/tech-house-vibes.mp3',
                downloadUrl: 'https://archive.org/download/tech-house-vibes/tech-house-vibes.mp3',
                duration: '01:15:30',
                cover: `
                    <svg class="session-cover-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="techHouseLargeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00ff88;stop-opacity:0.7" />
                                <stop offset="50%" style="stop-color:#00aa55;stop-opacity:0.8" />
                                <stop offset="100%" style="stop-color:#007733;stop-opacity:0.9" />
                            </linearGradient>
                        </defs>
                        <rect width="400" height="400" fill="url(#techHouseLargeGradient)"/>
                        <polygon points="100,100 300,100 350,200 300,300 100,300 50,200" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="3"/>
                        <polygon points="130,130 270,130 310,200 270,270 130,270 90,200" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                        <rect x="180" y="180" width="40" height="40" fill="rgba(255,255,255,0.8)"/>
                    </svg>
                `,
                tracklist: [
                    { time: '00:00', artist: 'Fisher', title: 'Losing It', label: 'Catch & Release' },
                    { time: '05:30', artist: 'Chris Lake', title: 'Operator', label: 'Black Book Records' },
                    { time: '10:45', artist: 'Walker & Royce', title: 'Take Me to Your Leader', label: 'Dirtybird' },
                    { time: '16:20', artist: 'Green Velvet', title: 'Flash', label: 'Relief Records' },
                    { time: '21:15', artist: 'Claude VonStroke', title: 'All My People', label: 'Dirtybird' },
                    { time: '26:40', artist: 'Solardo', title: 'XTC', label: 'Hot Creations' },
                    { time: '32:10', artist: 'CamelPhat', title: 'Cola', label: 'Defected' },
                    { time: '37:55', artist: 'Gorgon City', title: 'Burning', label: 'Positiva' },
                    { time: '43:25', artist: 'Disclosure', title: 'Energy', label: 'Island Records' },
                    { time: '48:50', artist: 'Tchami', title: 'Praise', label: 'Confession' },
                    { time: '54:15', artist: 'Malaa', title: 'Bylina', label: 'Tchami Music' },
                    { time: '59:30', artist: 'AC Slater', title: 'Take the Night', label: 'Night Bass' },
                    { time: '64:45', artist: 'Dombresky', title: 'Soul Sacrifice', label: 'Sweat It Out' },
                    { time: '70:00', artist: 'Noizu', title: 'Summer 91', label: 'Insomniac Records' }
                ]
            },
            'sari-bari-2025': {
                title: 'Sari Bari 2025',
                subtitle: 'Una sesión exclusiva VIP con una selección premium de House, Deep y Vocal',
                audioUrl: 'https://archive.org/download/saribari-20-25/Saribari%2020%2025.mp3',
                downloadUrl: 'https://archive.org/details/saribari-20-25',
                duration: '01:45:30',
                cover: `
                    <svg class="session-cover-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <!-- Sunset gradient background -->
                            <linearGradient id="sunsetGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#FFB366;stop-opacity:1" />
                                <stop offset="30%" style="stop-color:#FF8A65;stop-opacity:1" />
                                <stop offset="60%" style="stop-color:#FF7043;stop-opacity:1" />
                                <stop offset="80%" style="stop-color:#D84315;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#1565C0;stop-opacity:1" />
                            </linearGradient>
                            <!-- Ocean gradient -->
                            <linearGradient id="oceanGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#4FC3F7;stop-opacity:0.8" />
                                <stop offset="100%" style="stop-color:#0277BD;stop-opacity:1" />
                            </linearGradient>
                            <!-- Text gradient -->
                            <linearGradient id="titleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#5D4037;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#3E2723;stop-opacity:1" />
                            </linearGradient>
                            <filter id="glow-warm">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Sky background -->
                        <rect width="400" height="280" fill="url(#sunsetGradient)"/>
                        
                        <!-- Ocean -->
                        <rect x="0" y="280" width="400" height="120" fill="url(#oceanGradient)"/>
                        
                        <!-- Sun -->
                        <circle cx="200" cy="220" r="40" fill="#FFD54F" opacity="0.9"/>
                        <circle cx="200" cy="220" r="35" fill="#FFF176" opacity="0.7"/>
                        
                        <!-- Palm trees silhouettes -->
                        <g fill="#263238" opacity="0.8">
                            <!-- Left palm -->
                            <ellipse cx="320" cy="270" rx="3" ry="25"/>
                            <path d="M320,245 Q310,235 305,230 Q315,235 320,245"/>
                            <path d="M320,245 Q330,235 335,230 Q325,235 320,245"/>
                            <path d="M320,245 Q325,225 330,220 Q320,230 320,245"/>
                            <path d="M320,245 Q315,225 310,220 Q320,230 320,245"/>
                            
                            <!-- Right palm -->
                            <ellipse cx="350" cy="280" rx="2" ry="20"/>
                            <path d="M350,260 Q345,250 340,245 Q350,250 350,260"/>
                            <path d="M350,260 Q355,250 360,245 Q350,250 350,260"/>
                            <path d="M350,260 Q352,240 355,235 Q350,245 350,260"/>
                        </g>
                        
                        <!-- Tropical flowers -->
                        <g>
                            <!-- Pink flower -->
                            <circle cx="80" cy="320" r="12" fill="#FF8A80"/>
                            <circle cx="80" cy="320" r="8" fill="#FF5722" opacity="0.8"/>
                            
                            <!-- Yellow hibiscus -->
                            <circle cx="120" cy="340" r="10" fill="#FFD54F"/>
                            <circle cx="120" cy="340" r="6" fill="#FF9800" opacity="0.7"/>
                            
                            <!-- Red flower -->
                            <circle cx="280" cy="350" r="8" fill="#D32F2F"/>
                            <circle cx="280" cy="350" r="5" fill="#F44336" opacity="0.8"/>
                            
                            <!-- Blue flower -->
                            <circle cx="100" cy="360" r="6" fill="#1976D2"/>
                            <circle cx="100" cy="360" r="4" fill="#2196F3" opacity="0.7"/>
                        </g>
                        
                        <!-- Botanical icon at top -->
                        <circle cx="200" cy="60" r="25" fill="rgba(93, 64, 55, 0.2)" stroke="#5D4037" stroke-width="2"/>
                        <g fill="#5D4037" opacity="0.8">
                            <path d="M190,55 Q195,45 200,50 Q205,45 210,55 Q200,65 190,55"/>
                            <path d="M195,65 Q200,70 205,65"/>
                            <circle cx="198" cy="58" r="1"/>
                            <circle cx="202" cy="58" r="1"/>
                        </g>
                        
                        <!-- Main title -->
                        <text x="200" y="130" text-anchor="middle" fill="url(#titleGradient)" font-size="36" font-weight="bold" font-family="Arial, sans-serif" filter="url(#glow-warm)">SARI BARI</text>
                        <text x="200" y="160" text-anchor="middle" fill="url(#titleGradient)" font-size="18" font-weight="bold" font-family="Arial, sans-serif">AGOSTO 2025</text>
                        
                        <!-- VIP Badge -->
                        <rect x="160" y="300" width="80" height="20" rx="10" fill="rgba(139,0,255,0.9)" stroke="rgba(255,255,255,0.7)" stroke-width="1"/>
                        <text x="200" y="314" text-anchor="middle" fill="rgba(255,255,255,0.95)" font-size="11" font-weight="bold">VIP EXCLUSIVE</text>
                        
                        <!-- Genre label -->
                        <text x="200" y="380" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="14" font-weight="bold">HOUSE / DEEP / VOCAL</text>
                    </svg>
                `,
                tracklist: [
                    { time: '00:00', artist: 'Nomumbah', title: 'Like A Rainbow feat. Nadirah Shakoor', label: 'Deep House' },
                    { time: '04:30', artist: 'Various', title: 'Caterpillar (Atjazz Instrumental Remix)', label: 'Deep House' },
                    { time: '08:45', artist: 'Beatsbyhand x Kali Mija', title: 'Gypsy Woman', label: 'House' },
                    { time: '12:20', artist: 'Maverick Sabre Feat Jorja Smith', title: 'Slow Down James Cole', label: 'Vocal House' },
                    { time: '16:10', artist: 'Various', title: 'Wish I Didn\'t Miss You (feat. Billie Brown)', label: 'Vocal House' },
                    { time: '19:45', artist: 'iO (Mulen)', title: 'Report (Original Mix)', label: 'Tech House' },
                    { time: '23:30', artist: 'Soulsearcher', title: 'Can\'t Get Enough', label: 'Classic House' },
                    { time: '27:15', artist: 'Ezel', title: 'Don\'t Know Yet', label: 'Deep House' },
                    { time: '31:00', artist: 'RNDT feat. Kleophazz', title: 'Check One Two', label: 'House' },
                    { time: '34:20', artist: 'Various', title: 'Suena el Sabor', label: 'Latin House' },
                    { time: '38:10', artist: 'Moloko', title: 'Sing It Back (Boris Dlugosch Reprise)', label: 'Classic House' },
                    { time: '42:45', artist: 'Spencer Morales feat Tasha Larae', title: 'I Need Your Lovin', label: 'Vocal House' },
                    { time: '46:30', artist: 'LUZON', title: 'THE BAGIO TRACK (CHUS Y CEBALLOS RMX)', label: 'Tech House' },
                    { time: '50:15', artist: 'Blue Six', title: 'Music & Wine (Speakeasy 3000!)', label: 'Deep House' },
                    { time: '54:00', artist: 'Sam Ruffillo', title: 'House Tipo Cosi', label: 'House' },
                    { time: '57:25', artist: 'Dirty Old Ann', title: 'Turn Me On', label: 'Tech House' },
                    { time: '61:10', artist: 'Massiande', title: 'Dancing Stuff (I love the way)', label: 'House' },
                    { time: '64:45', artist: 'Julien Jabre', title: 'Swimming Places', label: 'Deep House' },
                    { time: '68:20', artist: 'DJ Rolando', title: 'Jaguar (Golan Zocher & Kai Vice Remix)', label: 'Tech House' },
                    { time: '72:00', artist: 'Master Le Funk', title: 'Believe (Ministers Vocal Mix)', label: 'Vocal House' },
                    { time: '75:40', artist: 'Jaykill, Linda Lovatón', title: 'Cure Me (Vocal Mix)', label: 'Vocal House' },
                    { time: '79:15', artist: 'Droog', title: 'Lucent', label: 'Deep House' },
                    { time: '82:50', artist: 'Fingers Inc', title: 'My House Acapella', label: 'Classic House' },
                    { time: '86:30', artist: 'Sparrow & Barbossa, Cee ElAssaad', title: 'Libre', label: 'Afro House' },
                    { time: '90:10', artist: '&ME', title: 'The Rapture Pt.II (Coco Vocal Edit)', label: 'Deep House' },
                    { time: '93:45', artist: 'Franky Rizardo', title: 'Revoke', label: 'Tech House' },
                    { time: '97:20', artist: 'Octave One', title: 'Black Water (Full Strings) - TMR', label: 'Deep House' },
                    { time: '101:00', artist: 'Berin, Mana Project', title: 'Many Times (Original Mix)', label: 'Deep House' }
                ]
            },
            'plastic': {
                title: 'Plastic',
                subtitle: 'Homenaje a la mítica discoteca Plastic de Madrid',
                audioUrl: 'https://archive.org/download/plastic_202507/Plastic.mp3',
                downloadUrl: 'https://archive.org/details/plastic_202507',
                duration: '55:40',
                cover: `
                    <svg class="session-cover-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <!-- Purple gradient background inspired by original cover -->
                            <linearGradient id="plasticGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#9B59B6;stop-opacity:1" />
                                <stop offset="30%" style="stop-color:#8E44AD;stop-opacity:1" />
                                <stop offset="60%" style="stop-color:#7D3C98;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#6C3483;stop-opacity:1" />
                            </linearGradient>
                            <!-- White accent gradient -->
                            <linearGradient id="whiteAccent" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#FFFFFF;stop-opacity:0.9" />
                                <stop offset="100%" style="stop-color:#F8F9FA;stop-opacity:0.8" />
                            </linearGradient>
                            <!-- Text gradient -->
                            <linearGradient id="plasticTextGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#FFD700;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#FFA500;stop-opacity:1" />
                            </linearGradient>
                            <filter id="glow-plastic">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Purple background -->
                        <rect width="400" height="400" fill="url(#plasticGradient)"/>
                        
                        <!-- White curved shape inspired by original logo -->
                        <path d="M80,120 Q200,100 320,120 Q300,220 200,240 Q100,220 80,120 Z" fill="url(#whiteAccent)" opacity="0.9"/>
                        
                        <!-- Secondary white accent -->
                        <path d="M120,170 Q200,150 280,170 Q260,240 200,260 Q140,240 120,170 Z" fill="rgba(255,255,255,0.6)" opacity="0.7"/>
                        
                        <!-- Geometric elements -->
                        <circle cx="200" cy="200" r="30" fill="rgba(255,255,255,0.3)" stroke="rgba(255,255,255,0.5)" stroke-width="2"/>
                        <circle cx="200" cy="200" r="15" fill="rgba(255,255,255,0.8)"/>
                        
                        <!-- Retro elements -->
                        <rect x="100" y="340" width="200" height="4" fill="rgba(255,255,255,0.6)"/>
                        <rect x="120" y="350" width="160" height="2" fill="rgba(255,255,255,0.4)"/>
                        
                        <!-- Main title -->
                        <text x="200" y="320" text-anchor="middle" fill="url(#plasticTextGrad)" font-size="42" font-weight="bold" font-family="Arial, sans-serif" filter="url(#glow-plastic)">PLASTIC</text>
                        
                        <!-- Subtitle -->
                        <text x="200" y="380" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="14" font-weight="bold">CLASSIC TRANCE ANTHEMS</text>
                        
                        <!-- Top label -->
                        <text x="200" y="60" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="12" font-weight="bold">REMEMBER</text>
                    </svg>
                `,
                tracklist: [
                    { time: '00:00', artist: 'Fragma', title: 'Man On The Moon', label: 'Trance' },
                    { time: '04:15', artist: 'Mauro Picotto', title: 'Komodo', label: 'Hard Trance' },
                    { time: '08:30', artist: 'Kai Tracid', title: 'Your Own Reality', label: 'Progressive Trance' },
                    { time: '12:45', artist: 'Virtualmismo', title: 'I Try To Find', label: 'Euro Trance' },
                    { time: '16:20', artist: 'Joy Kitikonti', title: 'Joyenergizer', label: 'Uplifting Trance' },
                    { time: '20:10', artist: 'Aqualords', title: 'Children of the Demon', label: 'Classic Trance' },
                    { time: '24:25', artist: 'Cosmicman', title: 'I Love You (Shane 54 Remix)', label: 'Vocal Trance' },
                    { time: '28:40', artist: 'Basic Dawn', title: 'Pure Thrust (Nu NRG Remix)', label: 'Tech Trance' },
                    { time: '32:55', artist: 'Abel Ramos', title: 'Das Spiegel', label: 'Progressive Trance' },
                    { time: '36:30', artist: 'Miguel Serna', title: 'In My Dreams', label: 'Uplifting Trance' },
                    { time: '40:15', artist: 'Elastica', title: 'The Test', label: 'Electronic' },
                    { time: '44:20', artist: 'AND ONE', title: 'Metalhammer', label: 'EBM/Trance' },
                    { time: '48:35', artist: 'Tyna Saez', title: 'Tupakamaru', label: 'Progressive Trance' },
                    { time: '52:10', artist: 'Iguana', title: 'Mauro Picotto', label: 'Hard Trance' }
                ]
            },
            'los-ninos-del-parque': {
                title: 'Los niños del parque',
                subtitle: 'Underground Techno - Industrial, Acid, Minimal',
                audioUrl: 'https://archive.org/download/los-ninos-del-parque/Los%20ni%C3%B1os%20del%20parque.mp3',
                downloadUrl: 'https://archive.org/details/los-ninos-del-parque',
                duration: '64:32',
                cover: `
                    <svg class="session-cover-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="darkGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#0a0a0a;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#1a1a1a;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#000000;stop-opacity:1" />
                            </linearGradient>
                            <filter id="glow-white">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Black background -->
                        <rect width="400" height="400" fill="url(#darkGradient)"/>
                        
                        <!-- Doll figure inspired by original -->
                        <g fill="#ffffff" stroke="#000" stroke-width="2" filter="url(#glow-white)">
                            <!-- Head -->
                            <ellipse cx="200" cy="130" rx="45" ry="50" fill="#ffffff"/>
                            <!-- Hair -->
                            <path d="M155,105 Q200,80 245,105 Q245,120 235,125 Q220,110 200,110 Q180,110 165,125 Q155,120 155,105" fill="#ffffff"/>
                            <!-- Hair spikes -->
                            <path d="M185,85 L192,70 L200,85 M200,85 L208,70 L215,85" stroke="#000" stroke-width="3" fill="none"/>
                            
                            <!-- Eyes -->
                            <circle cx="185" cy="125" r="10" fill="#ffffff" stroke="#000" stroke-width="3"/>
                            <circle cx="215" cy="125" r="10" fill="#ffffff" stroke="#000" stroke-width="3"/>
                            <circle cx="185" cy="125" r="4" fill="#000"/>
                            <circle cx="215" cy="125" r="4" fill="#000"/>
                            <!-- Eye stitches -->
                            <path d="M175,115 L195,135 M195,115 L175,135" stroke="#000" stroke-width="2"/>
                            <path d="M205,115 L225,135 M225,115 L205,135" stroke="#000" stroke-width="2"/>
                            
                            <!-- Nose cross stitch -->
                            <path d="M200,140 L200,155 M190,147.5 L210,147.5" stroke="#000" stroke-width="3"/>
                            
                            <!-- Mouth -->
                            <path d="M180,165 Q200,175 220,165" stroke="#000" stroke-width="3" fill="none"/>
                            
                            <!-- Face stitches -->
                            <path d="M165,130 L175,140 L165,150" stroke="#000" stroke-width="2" fill="none"/>
                            <path d="M235,130 L225,140 L235,150" stroke="#000" stroke-width="2" fill="none"/>
                            
                            <!-- Body -->
                            <rect x="170" y="180" width="60" height="80" rx="8" fill="#ffffff"/>
                            
                            <!-- Dress/coat details -->
                            <path d="M180,200 L220,200 M180,220 L220,220 M180,240 L220,240" stroke="#000" stroke-width="2"/>
                            <!-- Buttons -->
                            <circle cx="200" cy="210" r="3" fill="#000"/>
                            <circle cx="200" cy="230" r="3" fill="#000"/>
                            <circle cx="200" cy="250" r="3" fill="#000"/>
                            
                            <!-- Arms -->
                            <rect x="150" y="200" width="20" height="40" rx="10" fill="#ffffff"/>
                            <rect x="230" y="200" width="20" height="40" rx="10" fill="#ffffff"/>
                            
                            <!-- Legs -->
                            <rect x="180" y="260" width="15" height="50" rx="8" fill="#ffffff"/>
                            <rect x="205" y="260" width="15" height="50" rx="8" fill="#ffffff"/>
                            
                            <!-- Collar/bow -->
                            <path d="M190,185 Q200,175 210,185 Q200,195 190,185" fill="#ffffff" stroke="#000"/>
                        </g>
                        
                        <!-- Title -->
                        <text x="200" y="350" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="24" font-weight="bold">LOS NIÑOS DEL PARQUE</text>
                        <text x="200" y="375" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="14">UNDERGROUND TECHNO</text>
                    </svg>
                `,
                tracklist: [
                    { time: '00:00', artist: 'Oisel', title: 'Nucleo', label: 'Industrial' },
                    { time: '04:12', artist: 'Torsten Kanzler & Robert Egenolf', title: 'Void Trip', label: 'Berlin Techno' },
                    { time: '08:35', artist: 'Kreisel, Dok&Martin', title: 'Railroader', label: 'Underground' },
                    { time: '12:48', artist: 'Mount Kimbie', title: 'T.A.M.E.D', label: 'Minimal' },
                    { time: '16:22', artist: 'Bastinov', title: 'Wormhole', label: 'Acid' },
                    { time: '20:15', artist: 'Oliver Lieb', title: 'Field Of View', label: 'Tech House' },
                    { time: '24:33', artist: 'Hackler & Kuch', title: 'Z6', label: 'Industrial' },
                    { time: '28:07', artist: 'Andres Campo', title: 'Rola', label: 'Minimal' },
                    { time: '31:45', artist: 'Uto Karem, Gaston Zani', title: 'Disorientation', label: 'Underground' },
                    { time: '35:28', artist: 'KASE.O feat Najwa', title: 'MITAD Y MITAD (ANDRÉS CAMPO)', label: 'Tech House' },
                    { time: '39:10', artist: 'Hackler & Kuch', title: 'Duck & Cover', label: 'Industrial' },
                    { time: '42:55', artist: 'Arjun Vagale & Ramiro López', title: 'Oddball', label: 'Berlin Techno' },
                    { time: '46:20', artist: 'Vanjee', title: 'Jackin', label: 'Acid' },
                    { time: '50:12', artist: 'Control Movement', title: 'Gesaffelstein', label: 'Underground' },
                    { time: '54:38', artist: 'Green Velvet, Prok & Fitch', title: 'Sheeple', label: 'Tech House' },
                    { time: '58:25', artist: 'Vedou', title: 'Paprika', label: 'Minimal' }
                ]
            },
            'aero-red': {
                title: 'Aero-Red',
                subtitle: 'Acid Techno - Acid, Hard, Old School, Underground',
                audioUrl: 'https://archive.org/download/aero-red/Aero-Red.mp3',
                downloadUrl: 'https://archive.org/details/aero-red',
                duration: '68:45',
                cover: `
                    <svg class="session-cover-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="acidGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ff1744;stop-opacity:1" />
                                <stop offset="30%" style="stop-color:#e91e63;stop-opacity:1" />
                                <stop offset="60%" style="stop-color:#9c27b0;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#673ab7;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="acidAccent" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00e676;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#1de9b6;stop-opacity:1" />
                            </linearGradient>
                            <filter id="glow-acid">
                                <feGaussianBlur stdDeviation="6" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Acid gradient background -->
                        <rect width="400" height="400" fill="url(#acidGradient)"/>
                        
                        <!-- Abstract acid shapes -->
                        <path d="M70,100 Q130,70 200,100 Q270,130 330,100 Q290,200 200,220 Q110,200 70,100" fill="rgba(0,230,118,0.3)" filter="url(#glow-acid)"/>
                        <path d="M100,160 Q170,130 240,160 Q310,190 240,220 Q170,250 100,220 Q70,190 100,160" fill="rgba(29,233,182,0.4)" filter="url(#glow-acid)"/>
                        
                        <!-- Central acid circle -->
                        <circle cx="200" cy="200" r="80" fill="none" stroke="url(#acidAccent)" stroke-width="6" filter="url(#glow-acid)"/>
                        <circle cx="200" cy="200" r="60" fill="none" stroke="rgba(255,255,255,0.6)" stroke-width="3" stroke-dasharray="15,8"/>
                        <circle cx="200" cy="200" r="30" fill="rgba(0,230,118,0.8)" filter="url(#glow-acid)"/>
                        
                        <!-- Acid tech elements -->
                        <rect x="170" y="50" width="60" height="6" fill="url(#acidAccent)" filter="url(#glow-acid)"/>
                        <rect x="170" y="65" width="60" height="3" fill="rgba(255,255,255,0.8)"/>
                        <rect x="170" y="330" width="60" height="6" fill="url(#acidAccent)" filter="url(#glow-acid)"/>
                        <rect x="170" y="345" width="60" height="3" fill="rgba(255,255,255,0.8)"/>
                        
                        <!-- Side tech elements -->
                        <rect x="50" y="170" width="6" height="60" fill="url(#acidAccent)" filter="url(#glow-acid)"/>
                        <rect x="344" y="170" width="6" height="60" fill="url(#acidAccent)" filter="url(#glow-acid)"/>
                        
                        <!-- Title -->
                        <text x="200" y="290" text-anchor="middle" fill="url(#acidAccent)" font-size="36" font-weight="bold" filter="url(#glow-acid)">AERO</text>
                        <text x="200" y="325" text-anchor="middle" fill="rgba(255,23,68,0.9)" font-size="36" font-weight="bold" filter="url(#glow-acid)">RED</text>
                        <text x="200" y="365" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="16">ACID TECHNO</text>
                    </svg>
                `,
                tracklist: [
                    { time: '00:00', artist: 'Teik Arô', title: 'Acid Resurrection', label: 'Acid' },
                    { time: '03:25', artist: 'Three State Logic', title: 'Chromium Dioxide', label: 'Hard' },
                    { time: '06:50', artist: 'DJ Jordan', title: 'Acid Delight', label: 'Acid' },
                    { time: '10:15', artist: 'T78 & ROBPM', title: 'Acid Lick', label: 'Hard' },
                    { time: '13:40', artist: 'Acid', title: 'Techno', label: 'Old School' },
                    { time: '17:05', artist: 'ASYS', title: 'Dark Acid', label: 'Underground' },
                    { time: '20:30', artist: 'x', title: 'Rave On', label: 'Old School' },
                    { time: '23:55', artist: 'ASYS, Kai Tracid & Tom Wax', title: 'Freedom Of Expression', label: 'Acid' },
                    { time: '27:20', artist: 'Pan-Pot', title: 'Funke', label: 'Hard' },
                    { time: '30:45', artist: 'The Plant Worker & DIAPO', title: 'Plexiglas', label: 'Underground' },
                    { time: '34:10', artist: 'OC & Verde', title: 'Mondoshawan', label: 'Acid' },
                    { time: '37:35', artist: 'The Adventist', title: 'Destination', label: 'Hard' },
                    { time: '41:00', artist: 'Superstrobe, Dominik Vaillant, Torsten Kanzler', title: 'SuSizzle', label: 'Underground' },
                    { time: '44:25', artist: 'Hackler & Kuch', title: 'Duck & Cover', label: 'Old School' },
                    { time: '47:50', artist: 'Andres Campo', title: '2 Late', label: 'Acid' },
                    { time: '51:15', artist: 'Coyu', title: 'Fear Is Gonna Be A Player In Your Life', label: 'Hard' },
                    { time: '54:40', artist: 'Andres Campo', title: 'Rola', label: 'Underground' },
                    { time: '58:05', artist: 'Union Jack', title: 'Cockroach', label: 'Old School' },
                    { time: '61:30', artist: 'The Infinity Project', title: 'Stimuli (Astral Projection)', label: 'Acid' },
                    { time: '65:20', artist: 'Popof', title: 'Popof', label: 'Hard' }
                ]
            },
            'nati-nati': {
                title: 'Nati Nati',
                subtitle: 'Organic House - Melodic, Deep, Groovy',
                audioUrl: 'https://archive.org/download/nati-nati/Nati%20Nati.mp3',
                downloadUrl: 'https://archive.org/details/nati-nati',
                duration: '35:20',
                cover: `
                    <svg class="session-cover-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="natiGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ff6b35;stop-opacity:1" />
                                <stop offset="25%" style="stop-color:#f7931e;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#ffd23f;stop-opacity:1" />
                                <stop offset="75%" style="stop-color:#06d6a0;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#118ab2;stop-opacity:1" />
                            </linearGradient>
                            <radialGradient id="circleGradient1" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#ff6b35;stop-opacity:0.8" />
                                <stop offset="100%" style="stop-color:#073b4c;stop-opacity:0.6" />
                            </radialGradient>
                            <radialGradient id="circleGradient2" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#06d6a0;stop-opacity:0.9" />
                                <stop offset="100%" style="stop-color:#118ab2;stop-opacity:0.7" />
                            </radialGradient>
                            <filter id="glow-organic">
                                <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Base gradient background -->
                        <rect width="400" height="400" fill="url(#natiGradient)"/>
                        
                        <!-- Organic circular patterns inspired by the image -->
                        <circle cx="100" cy="90" r="35" fill="url(#circleGradient1)" opacity="0.8"/>
                        <circle cx="300" cy="120" r="45" fill="url(#circleGradient2)" opacity="0.7"/>
                        <circle cx="200" cy="160" r="25" fill="rgba(255,107,53,0.6)" opacity="0.9"/>
                        <circle cx="80" cy="240" r="40" fill="rgba(6,214,160,0.7)" opacity="0.8"/>
                        <circle cx="320" cy="280" r="38" fill="rgba(17,138,178,0.8)" opacity="0.9"/>
                        <circle cx="240" cy="330" r="30" fill="rgba(255,210,63,0.7)" opacity="0.8"/>
                        
                        <!-- Smaller organic dots -->
                        <circle cx="160" cy="70" r="12" fill="rgba(247,147,30,0.8)" filter="url(#glow-organic)"/>
                        <circle cx="270" cy="210" r="16" fill="rgba(255,107,53,0.9)" filter="url(#glow-organic)"/>
                        <circle cx="120" cy="310" r="14" fill="rgba(6,214,160,0.8)" filter="url(#glow-organic)"/>
                        <circle cx="340" cy="70" r="8" fill="rgba(17,138,178,0.9)" filter="url(#glow-organic)"/>
                        <circle cx="50" cy="160" r="18" fill="rgba(255,210,63,0.7)" filter="url(#glow-organic)"/>
                        
                        <!-- Central focal point -->
                        <circle cx="200" cy="200" r="50" fill="none" stroke="rgba(255,255,255,0.6)" stroke-width="3" filter="url(#glow-organic)"/>
                        <circle cx="200" cy="200" r="20" fill="rgba(255,255,255,0.9)" filter="url(#glow-organic)"/>
                        
                        <!-- Title -->
                        <text x="200" y="350" text-anchor="middle" fill="rgba(255,255,255,0.95)" font-size="32" font-weight="bold" filter="url(#glow-organic)">NATI</text>
                        <text x="200" y="380" text-anchor="middle" fill="rgba(255,255,255,0.95)" font-size="32" font-weight="bold" filter="url(#glow-organic)">NATI</text>
                    </svg>
                `,
                tracklist: [
                    { time: '00:00', artist: 'Rampa', title: '2000', label: 'Melodic' },
                    { time: '03:30', artist: 'Sergio Fernández', title: 'Jade', label: 'Deep' },
                    { time: '07:15', artist: 'Cioz', title: 'Burning Soul', label: 'Groovy' },
                    { time: '10:45', artist: 'Cioz ft. Eleonora', title: 'Dancing In The Night', label: 'Melodic' },
                    { time: '14:20', artist: 'Keinemusik', title: 'Discoteca feat. Sofie', label: 'Deep' },
                    { time: '18:00', artist: 'Rampa', title: 'The Church', label: 'Groovy' },
                    { time: '21:35', artist: 'Clemente', title: 'The Captain Of Her Heart', label: 'Melodic' },
                    { time: '25:10', artist: 'Cioz', title: 'A Funky Peacock and a Tiger', label: 'Groovy' },
                    { time: '28:45', artist: 'Eli & Fur', title: 'Coming Back', label: 'Deep' },
                    { time: '32:20', artist: 'Spektre', title: 'Another Life', label: 'Melodic' }
                ]
            },
            'elrow': {
                title: 'ElROW',
                subtitle: 'House Festival - Tech House, Groovy, Party',
                audioUrl: 'https://archive.org/download/ro-wllaz-o/ElROW.mp3',
                downloadUrl: 'https://archive.org/details/ro-wllaz-o',
                duration: '68:30',
                cover: `
                    <svg class="session-cover-svg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="elrowGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ff4081;stop-opacity:1" />
                                <stop offset="25%" style="stop-color:#ff9800;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#ffeb3b;stop-opacity:1" />
                                <stop offset="75%" style="stop-color:#4caf50;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#2196f3;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="elrowAccent" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#e91e63;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#ff5722;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#ff9800;stop-opacity:1" />
                            </linearGradient>
                            <filter id="glow-party">
                                <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Festive gradient background -->
                        <rect width="400" height="400" fill="url(#elrowGradient)"/>
                        
                        <!-- Party banner elements -->
                        <path d="M0,60 Q100,30 200,60 Q300,90 400,60 L400,100 Q300,130 200,100 Q100,70 0,100 Z" fill="rgba(233,30,99,0.8)" filter="url(#glow-party)"/>
                        <path d="M0,300 Q100,270 200,300 Q300,330 400,300 L400,340 Q300,370 200,340 Q100,310 0,340 Z" fill="rgba(255,87,34,0.8)" filter="url(#glow-party)"/>
                        
                        <!-- Triangular flags -->
                        <polygon points="70,60 90,20 110,60" fill="rgba(76,175,80,0.9)"/>
                        <polygon points="150,100 170,60 190,100" fill="rgba(33,150,243,0.9)"/>
                        <polygon points="230,60 250,20 270,60" fill="rgba(255,193,7,0.9)"/>
                        <polygon points="310,100 330,60 350,100" fill="rgba(156,39,176,0.9)"/>
                        
                        <!-- Central elrow text inspired by logo -->
                        <rect x="80" y="160" width="240" height="80" rx="40" fill="rgba(255,235,59,0.95)" filter="url(#glow-party)"/>
                        
                        <!-- Main title with party style -->
                        <text x="200" y="210" text-anchor="middle" fill="url(#elrowAccent)" font-size="42" font-weight="bold" font-family="Arial, sans-serif">elrow</text>
                        
                        <!-- Party confetti dots -->
                        <circle cx="100" cy="120" r="6" fill="rgba(233,30,99,0.8)" filter="url(#glow-party)"/>
                        <circle cx="300" cy="140" r="7" fill="rgba(76,175,80,0.8)" filter="url(#glow-party)"/>
                        <circle cx="120" cy="280" r="5" fill="rgba(33,150,243,0.8)" filter="url(#glow-party)"/>
                        <circle cx="280" cy="260" r="6" fill="rgba(255,193,7,0.8)" filter="url(#glow-party)"/>
                        <circle cx="340" cy="180" r="5" fill="rgba(255,87,34,0.8)" filter="url(#glow-party)"/>
                        <circle cx="90" cy="220" r="7" fill="rgba(156,39,176,0.8)" filter="url(#glow-party)"/>
                        
                        <!-- Subtitle -->
                        <text x="200" y="360" text-anchor="middle" fill="rgba(255,255,255,0.95)" font-size="18" font-weight="bold">HOUSE FESTIVAL</text>
                    </svg>
                `,
                tracklist: [
                    { time: '00:00', artist: 'DJ Fronter', title: 'Chitown', label: 'Tech House' },
                    { time: '03:25', artist: 'Raul Mezcolanza', title: 'Two Senses', label: 'Groovy' },
                    { time: '06:50', artist: 'Sergio Fernandez', title: 'Paraiso', label: 'Party' },
                    { time: '10:15', artist: 'Leland McWilliams', title: 'All I Need', label: 'Tech House' },
                    { time: '13:40', artist: 'Guille Plasencia', title: 'Disa', label: 'Groovy' },
                    { time: '17:05', artist: 'Oscar Aguilera, George Privatti', title: 'The Morning Kids', label: 'Party' },
                    { time: '20:30', artist: 'George Privatti', title: 'Papantas', label: 'Tech House' },
                    { time: '23:55', artist: 'George Privatti', title: 'Mousy', label: 'Groovy' },
                    { time: '27:20', artist: 'Guille Plasencia', title: 'Hurry Up', label: 'Party' },
                    { time: '30:45', artist: 'Jay Lumen', title: 'Not Like That', label: 'Tech House' },
                    { time: '34:10', artist: 'Jay Lumen', title: 'Get Ya!', label: 'Groovy' },
                    { time: '37:35', artist: 'Jay Lumen', title: 'Strange Fruit', label: 'Party' },
                    { time: '41:00', artist: 'Jay Lumen', title: 'As One', label: 'Tech House' },
                    { time: '44:25', artist: 'Jay Lumen', title: 'Femme Fatale', label: 'Groovy' },
                    { time: '47:50', artist: 'Nikola Gala', title: 'Rock Steady', label: 'Party' },
                    { time: '51:15', artist: 'Umek & Jay Lumen', title: 'Sinful Ladies', label: 'Tech House' },
                    { time: '54:40', artist: 'Joshiwa', title: 'La Vida', label: 'Groovy' },
                    { time: '58:05', artist: 'Sabb', title: 'Percomaniac', label: 'Party' },
                    { time: '61:30', artist: 'Reboot', title: 'Hermano', label: 'Tech House' },
                    { time: '65:20', artist: 'Joeski feat. Héctor Lavoe', title: 'Dia De Ayer', label: 'Groovy' }
                ]
            }
        };

        // Get session ID from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const sessionId = urlParams.get('session') || 'first-date-vol-ii';
        const session = sessionData[sessionId] || sessionData['first-date-vol-ii'];

        // Initialize player with session data
        function initializePlayer() {
            // Set the correct titles based on session
            if (sessionId === 'nature-tech-house') {
                document.getElementById('mainSessionTitle').textContent = 'Nature';
                document.getElementById('sessionSubtitle').textContent = 'Tech House';
            } else if (sessionId === 'sari-bari-2025') {
                document.getElementById('mainSessionTitle').textContent = 'Sari Bari 2025';
                document.getElementById('sessionSubtitle').textContent = 'VIP Exclusive';
            } else if (sessionId === 'plastic') {
                document.getElementById('mainSessionTitle').textContent = 'Plastic';
                document.getElementById('sessionSubtitle').textContent = 'Classic Trance Anthems';
            } else if (sessionId === 'los-ninos-del-parque') {
                document.getElementById('mainSessionTitle').textContent = 'Los niños del parque';
                document.getElementById('sessionSubtitle').textContent = 'Underground Techno';
            } else if (sessionId === 'aero-red') {
                document.getElementById('mainSessionTitle').textContent = 'Aero-Red';
                document.getElementById('sessionSubtitle').textContent = 'Acid Techno';
            } else if (sessionId === 'nati-nati') {
                document.getElementById('mainSessionTitle').textContent = 'Nati Nati';
                document.getElementById('sessionSubtitle').textContent = 'Organic House';
            } else if (sessionId === 'elrow') {
                document.getElementById('mainSessionTitle').textContent = 'ElROW';
                document.getElementById('sessionSubtitle').textContent = 'House Festival';
            } else {
                document.getElementById('mainSessionTitle').textContent = 'Progressive House';
                document.getElementById('sessionSubtitle').textContent = 'First Date Vol. II';
            }
            
            document.getElementById('duration').textContent = session.duration;
            document.getElementById('sessionCover').innerHTML = session.cover;
            document.getElementById('audioSource').src = session.audioUrl;
            
            // Load audio
            const audio = document.getElementById('mainAudioPlayer');
            
            // Add error handling for audio loading
            audio.addEventListener('error', function(e) {
                console.error('Error loading audio:', e);
                console.log('Trying alternative URL...');
                // Try alternative URL format
                if (sessionId === 'nature-tech-house') {
                    audio.src = 'https://archive.org/download/nature-club/Nature Club.mp3';
                    audio.load();
                }
            });
            
            audio.addEventListener('canplay', function() {
                console.log('Audio loaded successfully');
            });
            
            // Prevent auto-pause when window loses focus or is minimized
            audio.addEventListener('pause', function(e) {
                // Only auto-resume if not manually paused by user
                if (!window.userPausedAudio && document.visibilityState === 'hidden') {
                    setTimeout(() => {
                        if (!window.userPausedAudio) {
                            audio.play().catch(e => console.log('Auto-resume prevented by browser policy'));
                        }
                    }, 100);
                }
            });
            
            // Track user-initiated pause/play
            window.userPausedAudio = false;
            
            audio.load();
            
            // Generate tracklist
            generateTracklist();
            
            // Setup custom player
            setupCustomPlayer();
            
            // Setup download button
            setupDownload();
        }

        function generateTracklist() {
            const tracklistContainer = document.getElementById('tracklist');
            tracklistContainer.innerHTML = '';
            
            const tracklist = session.tracklist || session.tracks || [];
            tracklist.forEach((track, index) => {
                const trackElement = document.createElement('div');
                trackElement.className = 'track-item';
                trackElement.innerHTML = `
                    <div class="track-number">${String(index + 1).padStart(2, '0')}</div>
                    <div class="track-time">${track.time || '--:--'}</div>
                    <div class="track-info">
                        <div class="track-artist">${track.artist || track.split(' - ')[0] || 'Unknown Artist'}</div>
                        <div class="track-title">${track.title || track.split(' - ')[1] || track}</div>
                        <div class="track-label">${track.label || 'Trance'}</div>
                    </div>
                `;
                tracklistContainer.appendChild(trackElement);
            });
        }

        function setupCustomPlayer() {
            const audio = document.getElementById('mainAudioPlayer');
            const playPauseBtn = document.getElementById('playPauseBtn');
            const stopBtn = document.getElementById('stopBtn');
            const rewindBtn = document.getElementById('rewindBtn');
            const forwardBtn = document.getElementById('forwardBtn');
            const progressBar = document.getElementById('progressBar');
            const progressFill = document.getElementById('progressFill');
            const progressHandle = document.getElementById('progressHandle');
            const currentTimeEl = document.getElementById('currentTime');
            const totalTimeEl = document.getElementById('totalTime');
            const playIcon = document.querySelector('.play-icon');
            const pauseIcon = document.querySelector('.pause-icon');

            let isPlaying = false;
            let isDragging = false;

            // Store current session data for global player
            window.currentSessionData = {
                title: session.title,
                subtitle: session.subtitle,
                audioUrl: session.audioUrl
            };

            // Play/Pause functionality
            playPauseBtn.addEventListener('click', () => {
                if (isPlaying) {
                    audio.pause();
                    window.userPausedAudio = true; // User manually paused
                    
                    // Pause global player too
                    if (window.globalAudioPlayer) {
                        window.globalAudioPlayer.pause();
                    }
                } else {
                    audio.play();
                    window.userPausedAudio = false; // User manually played
                    
                    // Start global player with current session
                    if (window.startGlobalPlayer) {
                        window.startGlobalPlayer(window.currentSessionData);
                    }
                }
            });

            // Stop functionality
            stopBtn.addEventListener('click', () => {
                audio.pause();
                audio.currentTime = 0;
                window.userPausedAudio = true; // User manually stopped
                
                // Stop global player too
                if (window.globalAudioPlayer) {
                    window.globalAudioPlayer.stop();
                }
            });

            // Rewind 10 seconds
            rewindBtn.addEventListener('click', () => {
                if (!isNaN(audio.duration) && audio.currentTime >= 0) {
                    audio.currentTime = Math.max(0, audio.currentTime - 10);
                    
                    // Sync with global player
                    if (window.globalAudioPlayer && window.globalAudioPlayer.audio) {
                        window.globalAudioPlayer.audio.currentTime = audio.currentTime;
                    }
                }
            });

            // Forward 10 seconds
            forwardBtn.addEventListener('click', () => {
                if (!isNaN(audio.duration) && audio.currentTime >= 0) {
                    audio.currentTime = Math.min(audio.duration, audio.currentTime + 10);
                    
                    // Sync with global player
                    if (window.globalAudioPlayer && window.globalAudioPlayer.audio) {
                        window.globalAudioPlayer.audio.currentTime = audio.currentTime;
                    }
                }
            });

            // Update play/pause button state
            audio.addEventListener('play', () => {
                isPlaying = true;
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            });

            audio.addEventListener('pause', () => {
                isPlaying = false;
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            });

            // Update progress and time
            audio.addEventListener('timeupdate', () => {
                if (!isDragging && !isNaN(audio.duration) && audio.duration > 0) {
                    const progress = (audio.currentTime / audio.duration) * 100;
                    progressFill.style.width = progress + '%';
                    progressHandle.style.left = progress + '%';
                }
                if (!isNaN(audio.currentTime)) {
                    currentTimeEl.textContent = formatTime(audio.currentTime);
                }
            });

            // Set total time when metadata loads
            audio.addEventListener('loadedmetadata', () => {
                if (!isNaN(audio.duration)) {
                    totalTimeEl.textContent = formatTime(audio.duration);
                }
            });

            // Progress bar click and drag
            progressBar.addEventListener('click', (e) => {
                if (!isNaN(audio.duration) && audio.duration > 0) {
                    const rect = progressBar.getBoundingClientRect();
                    const percent = (e.clientX - rect.left) / rect.width;
                    audio.currentTime = percent * audio.duration;
                    
                    // Sync with global player
                    if (window.globalAudioPlayer && window.globalAudioPlayer.audio) {
                        window.globalAudioPlayer.audio.currentTime = audio.currentTime;
                    }
                }
            });

            // Drag functionality for progress handle
            progressHandle.addEventListener('mousedown', (e) => {
                isDragging = true;
                e.preventDefault();
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const rect = progressBar.getBoundingClientRect();
                    const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
                    progressFill.style.width = (percent * 100) + '%';
                    progressHandle.style.left = (percent * 100) + '%';
                }
            });

            document.addEventListener('mouseup', () => {
                if (isDragging && !isNaN(audio.duration) && audio.duration > 0) {
                    const rect = progressBar.getBoundingClientRect();
                    const percent = parseFloat(progressHandle.style.left) / 100;
                    audio.currentTime = percent * audio.duration;
                    isDragging = false;
                }
            });

            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
        }

        function setupDownload() {
            const downloadBtn = document.getElementById('downloadBtn');
            downloadBtn.addEventListener('click', () => {
                const link = document.createElement('a');
                link.href = session.downloadUrl;
                link.download = `${session.title}.mp3`;
                link.click();
            });
        }

        // Scroll Progress Indicator
        window.addEventListener('scroll', () => {
            const scrolled = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
            document.querySelector('.scroll-progress').style.width = scrolled + '%';
        });

        // Parallax Effect for Background Particles
        window.addEventListener('scroll', () => {
            const scrolled = window.scrollY;
            const particles = document.querySelectorAll('.particle');
            
            particles.forEach((particle, index) => {
                const speed = (index + 1) * 0.2;
                particle.style.transform = `translateY(${scrolled * speed}px) rotate(${scrolled * 0.1}deg)`;
            });
        });

        // Handle visibility changes to keep audio playing when minimized
        document.addEventListener('visibilitychange', function() {
            const audio = document.getElementById('mainAudioPlayer');
            
            if (document.visibilityState === 'hidden') {
                // Page is hidden (minimized, tab switched, etc.)
                console.log('Page hidden, audio should continue playing');
                // Don't pause the audio automatically
            } else if (document.visibilityState === 'visible') {
                // Page is visible again
                console.log('Page visible again');
                // If audio was playing before hiding and user didn't manually pause it, resume
                if (!window.userPausedAudio && audio.paused) {
                    audio.play().catch(e => console.log('Auto-resume prevented by browser'));
                }
            }
        });

        // Prevent audio from pausing when window loses focus
        window.addEventListener('blur', function() {
            console.log('Window lost focus - keeping audio playing');
        });

        window.addEventListener('focus', function() {
            console.log('Window gained focus');
        });

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializePlayer);
    </script>
</body>
</html>